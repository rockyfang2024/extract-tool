<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>微信公众号文章提取器 (Web)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:20px;max-width:900px}
    textarea{width:100%;height:140px}
    input[type=text]{width:100%}
    .row{margin-bottom:12px}
    .small{font-size:0.9em;color:#666}
    .btn{display:inline-block;padding:8px 14px;background:#1976d2;color:#fff;text-decoration:none;border-radius:4px}
  </style>
</head>
<body>
  <h1>微信公众号文章提取器 (Web)</h1>
  <p class="small">基于 wechat_extract.py。输入单个 URL 或多行 URL（每行一个），选择输出格式与选项，提取后在服务器端保存并提供下载。</p>

  <form action="/extract" method="post">
    <div class="row">
      <label>单个 URL：</label>
      <input type="text" name="url" placeholder="https://mp.weixin.qq.com/s/..." />
    </div>

    <div class="row">
      <label>多个 URL（每行一个）：</label>
      <textarea name="urls" placeholder="https://mp.weixin.qq.com/s/...\nhttps://mp.weixin.qq.com/s/..."></textarea>
    </div>

    <div class="row">
      <label>输出格式：</label>
      <select name="format">
        <option value="md">Markdown (.md)</option>
        <option value="html">HTML (.html)</option>
        <option value="json">JSON (.json)</option>
      </select>
    </div>

    <div class="row">
      <label><input type="checkbox" name="download_images" /> 下载文章中图片并替换为本地路径</label>
    </div>

    <div class="row">
      <label>输出目录（相对于服务器 outputs 根目录，或填写已存在的绝对路径）：</label>
      <input type="text" name="outdir" value="{{ default_outdir }}" />
      <p class="small">默认保存路径可在 <a href="/settings">设置</a> 中修改。</p>
    </div>

    <div class="row">
      <label>并发线程数：</label>
      <input type="text" name="workers" value="4" />
      <label style="margin-left:20px">超时（秒）：</label>
      <input type="text" name="timeout" value="15" />
    </div>

    <div class="row">
      <button class="btn" type="submit">开始提取</button>
      <a class="btn" href="/settings" style="background:#555;margin-left:8px">设置默认路径</a>
    </div>
  </form>
</body>
</html>